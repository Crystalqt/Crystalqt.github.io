






<!doctype html>
<html lang="zh-CN">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="author" content="梦涵">
  
  
  
  
    <meta name="description" content="工欲善其事，必先利其器。下面要开始用 Hexo + GitHub 搭建自己的博客了。需要注意的是，网上的资料有一些已经过时，而现在的这篇文章也可能在以后过时，所以只将目前我搭建 hexo 博客站的经验总结如下。">
  
  <title>使用hexo搭建自己的博客 - 快速开始 [ CrystalCrazy ]</title>
  
    <link rel="alternate" href="/atom.xml" title="CrystalCrazy">
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  <link rel="stylesheet" href="/css/random.css">
<link rel="stylesheet" href="/css/vegas.min.css">
<link rel="stylesheet" href="/css/highlight-railscasts.css">
<link rel="stylesheet" href="/css/jquery.fancybox.css">
<link rel="stylesheet" href="/css/iconfont/iconfont.css">
<link rel="stylesheet" href="/css/jquery.fancybox-thumbs.css">
<link rel="stylesheet" href="/css/plyr.css">
  
</head>

<body>
<div class="side-navigate hide-area">
  
    <div class="item prev">
      <a href="/2018/01/23/hello-world/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        Hello World
      </div>
    </div>
  
  
</div>
<div id="outer-container" class="hide-area">
<div id="container">
  <div id="menu-outer" class="slide-down">
    <div id="menu-inner">
      <div id="brand">
        
        <a onClick="openUserCard()">
          <img id="avatar" src="/uploads/car_touxiang.jpg"/>
          <div id="homelink">CrystalCrazy</div>
        </a>
      </div>
      <div id="menu-list">
        <ul>
        
        
          
            <li>
          
            <a href="/index.html">Home</a>
            
          </li>
        
          
            <li>
          
            <a href="/archives">Archives</a>
            
          </li>
        
          
            <li>
          
            <a href="/about">About</a>
            
          </li>
        
          
            <li>
          
            <a href="https://github.com/crystalqt/">Github</a>
            
          </li>
        
        </ul>
      </div>
      <div id="show-menu">
        <button>Menu</button>
      </div>
    </div>
  </div>

  <div id="content-outer">
    <div id="content-inner">
      
      
  <article id="post">
    <h1>使用hexo搭建自己的博客 - 快速开始</h1>
    <p class="page-title-sub">
      <span id = "post-title-date">撰写于 2017-12-18</span>
      
        <span id = "post-title-updated">修改于 2018-01-23</span>
      
      
      
      <span id = "post-title-tags">
      标签
      
      
        
        
        <a href="/tags/hexo/">hexo</a>
      
      </span>
      
    </p>
    
    <p>工欲善其事，必先利其器。下面要开始用 <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> + <a href="https://github.com/" target="_blank" rel="noopener">GitHub</a> 搭建自己的博客了。需要注意的是，网上的资料有一些已经过时，而现在的这篇文章也可能在以后过时，所以只将目前我搭建 hexo 博客站的经验总结如下。</p>
<a id="more"></a>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><p>我们要使用 hexo 搭建一个个人博客项目，并使其部署在 <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> 上（GitHub Pages是 GitHub 为开发者提供的免费托管网站的空间，这就使得我们不再需要额外购买独立的域名空间了，对于部署个人博客这样的小访问量网站来说极其方便，具体信息可以自行查询资料）。</p>
<h2 id="简易搭建方法"><a href="#简易搭建方法" class="headerlink" title="简易搭建方法"></a>简易搭建方法</h2><p>从网上找过几处资料，从中选取了最简捷的搭建方法记录如下。更多的资料可以查阅 hexo <a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="noopener">官方文档</a>。</p>
<h3 id="安装前提"><a href="#安装前提" class="headerlink" title="安装前提"></a>安装前提</h3><p>hexo 基于 Node.js，并且我们想要将博客部署在 GitHub 上，于是我们需要先安装 <a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a> 以及 <a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a>。<br>当然，我们还需要申请一个 GitHub 账号，因为我们的网站域名将会是由GitHub按照我们的用户名分配给我们的，比如我的注册用户名是 musheng66，那么我的个人域名就是 <a href="https://musheng66.github.io/" target="_blank" rel="noopener">https://musheng66.github.io/</a>。</p>
<h3 id="安装-hexo"><a href="#安装-hexo" class="headerlink" title="安装 hexo"></a>安装 hexo</h3><p>hexo 的安装非常简单，如果我们已经安装好了 Node.js，我们就可以打开命令行，只需一行命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<p>当然 Mac 用户朋友们可能由于权限限制，需要输入：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo npm install -g hexo-cli</span><br></pre></td></tr></table></figure></p>
<p>安装完成。</p>
<h3 id="建站"><a href="#建站" class="headerlink" title="建站"></a>建站</h3><p>安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;要建立的项目文件夹，如：blog&gt;</span><br><span class="line">$ <span class="built_in">cd</span> blog</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure></p>
<h3 id="命令"><a href="#命令" class="headerlink" title="命令"></a>命令</h3><p>通过命令行可以执行hexo的各项命令，完成从建站到发布所需的操作。</p>
<h4 id="new"><a href="#new" class="headerlink" title="new"></a>new</h4><p>新建博客，hexo 会自行生成一个对应名称的 .md 文件。需要注意的是如果想删除博客，可以直接删除 .md 文件并重新 generate 博客站。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new 博客名称</span><br></pre></td></tr></table></figure></p>
<h4 id="generate"><a href="#generate" class="headerlink" title="generate"></a>generate</h4><p>生成静态文件，可以生成我们的 hexo 博客网站。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo g</span><br></pre></td></tr></table></figure></p>
<h4 id="clean"><a href="#clean" class="headerlink" title="clean"></a>clean</h4><p>清除已生成的静态文件，每次需要重新生成网站之前运行。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo clean</span><br></pre></td></tr></table></figure></p>
<h4 id="server"><a href="#server" class="headerlink" title="server"></a>server</h4><p>用来查看本机的 hexo 博客项目，需要先进行 clean，generate 操作再运行。需要注意的是如果只修改了博客内容，是不需要重新生成网站的，而修改了其他的诸如博客标题、模版样式、资源文件等需要重新 generate 之后才能看到效果。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure></p>
<h4 id="deploy"><a href="#deploy" class="headerlink" title="deploy"></a>deploy</h4><p>部署到 GitHub，下文将介绍具体的步骤。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure></p>
<h3 id="与-GitHub-进行关联"><a href="#与-GitHub-进行关联" class="headerlink" title="与 GitHub 进行关联"></a>与 GitHub 进行关联</h3><p>我们需要将目前的 hexo 项目与我们 GitHub 个人账号中的一个 repository 进行关联，这样我们每次只需要一个 deploy 命令，就可以将新写的博客发到我们的个人博客站上了。</p>
<h4 id="建立-GitHub-repository"><a href="#建立-GitHub-repository" class="headerlink" title="建立 GitHub repository"></a>建立 GitHub repository</h4><p>使用 GitHub 账号登录后，建立一个属于自己的 repository 非常容易，<strong>我们需要注意的是 repository 的命名必须和我们被分配的域名相同</strong>，比如我的 repository 就需要命名为 musheng66.github.io，这一点非常重要。</p>
<h4 id="配置与发布"><a href="#配置与发布" class="headerlink" title="配置与发布"></a>配置与发布</h4><p>在我们的整个 hexo 项目中，<strong>_config.yml</strong> 是配置文件，我们可以在其中修改各种可配置的网站属性。现在我们需要将本地的 hexo 项目与 GitHub 上的 repository 进行关联。<br>我们需要找到 _config.yml 中的 deploy 属性，将其设置如下：</p>
<pre>
deploy:
  type: git
  repository: https://github.com/musheng66/musheng66.github.io.git
  branch: master
</pre>

<p><strong>注意</strong>：repository 属性需要填写<strong>我们自己的 repository 对应的地址</strong>。修改完成后，我们每次使用 deploy 命令即可发布新的博客。至此，使用 hexo + GitHub 搭建博客的简要过程就介绍完了。</p>
<h2 id="踩过的坑"><a href="#踩过的坑" class="headerlink" title="踩过的坑"></a>踩过的坑</h2><h3 id="页面引入-jQuery-的问题"><a href="#页面引入-jQuery-的问题" class="headerlink" title="页面引入 jQuery 的问题"></a>页面引入 jQuery 的问题</h3><p>使用主题生成的主页面 index.html 会引入 jQuery 文件，而引入的语句通常是这样的：</p>
<pre><code>&lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js&quot;&gt;&lt;/script&gt;
</code></pre><p>目前我们的 GFW 显然不会放任我们访问这样的站点，所以这会导致我们的博客无法正常渲染 jQuery 相关的动效和功能。</p>
<p>想要解决这个问题也并不复杂，只需要找到当前实用的主题文件夹，在其layout文件夹中找到写有引入 jQuery 文件的位置。对于使用 hexo 默认方法搭建博客的开发者来说，此位置一般在 themes/landscape/layout/_partial/after-footer.ejs。我们只需在此处将引入 jQuery 的地址替换为国内可访问的镜像，或者索性下载一份 jQuery 代码放入此主题的 source/js 文件夹中再行引用即可。</p>
<p>补充一点，我们需要注意此处引用的 jQuery 是 http 协议的外部资源，而我们的项目部署在 GitHub 上，GitHub 使用的 https 协议是无法加载 http 协议的资源的。好在我们引用的时候并没有指定协议，在 URL 之前的<code>//</code>使用了当前协议，因此外部资源可以正常引入。</p>
<h3 id="使用-Material-主题时出现的问题"><a href="#使用-Material-主题时出现的问题" class="headerlink" title="使用 Material 主题时出现的问题"></a>使用 Material 主题时出现的问题</h3><p>众所周知，<a href="https://github.com/viosey/hexo-theme-material" target="_blank" rel="noopener">Material</a> 主题是一款非常漂亮的 hexo 主题，不过我们在第一次使用它时可能也会出现一些小问题。</p>
<h4 id="hexo-g-报错问题"><a href="#hexo-g-报错问题" class="headerlink" title="hexo g 报错问题"></a>hexo g 报错问题</h4><p>虽然 hexo g 报错可能有各种原因，但大家在第一次使用 Material 主题时最容易导致报错的原因大概会是这样：</p>
<blockquote>
<p>注意！ 在主题的开发迭代过程中，主题的配置文件模板 可能会改动。为了避免使用 git pull 更新主题的用户出现冲突，我们将 主题配置文件模板 命名为 _config.template.yml。配置主题时，你应该拷贝一份 _config.template.yml 并将其重命名为 _config.yml。</p>
</blockquote>
<p>这是 Material 主题使用说明中的一段，正因为它将 _config 配置文件改了名字，我们在 hexo g 时才会报类似这样的错：</p>
<pre>
Unhandled rejection TypeError: /Users/musheng/Projects/WebstormProjects/blog/themes/material/layout/post.ejs:44
    42|                 <!-- Post Comments -->
    43|                 <% if(page.comment="" !="=" false)="" {="" %="">
 >> 44|                     <%- partial('_partial="" comment')="" %="">
    45|                 <% }="" %="">
    46|             
    47|
</%></%-></%></pre>

<p>所以对于这个问题，我们只需要<strong>拷贝一份 _config.template.yml 并将其重命名为 _config.yml</strong>就可以解决了。</p>
<h4 id="本地搜索问题"><a href="#本地搜索问题" class="headerlink" title="本地搜索问题"></a>本地搜索问题</h4><p>使用 Material 主题时，如果我们想使用本地搜索而非 Google 或其他搜索该如何设置呢？</p>
<p>首先，使用本地搜索需要安装 <a href="https://github.com/PaicHyperionDev/hexo-generator-search" target="_blank" rel="noopener">hexo-generator-search</a> 插件。</p>
<p>然后，我们需要在项目根目录下找到 _config.yml 文件，在里面添加：</p>
<pre>
# Native Search
## https://github.com/PaicHyperionDev/hexo-generator-search
search:
    path: search.xml
    field: all
</pre>

<p>另外，因为 Material 主题的配置文件中对搜索可能也有配置，我们还需要找到主题中的配置，<strong>修改 use 为 local</strong> ：</p>
<pre>
# Search Systems
# Available value:
#     swiftype | google | local
search:
    use: local
    swiftype_key:
</pre>


<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo 官方</a></p>
<p><a href="https://material.viosey.com/" target="_blank" rel="noopener">Material 主题</a></p>
<p><a href="https://www.qcloud.com/community/article/989575001490326243" target="_blank" rel="noopener">使用 Github 和 Hexo 快速搭建个人博客</a></p>
<p><a href="http://baixin.io/2015/08/HEXO%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/" target="_blank" rel="noopener">HEXO搭建个人博客</a></p>
<p><a href="https://musheng66.github.io/" target="_blank" rel="noopener">使用hexo搭建自己的个人博客</a></p>

  </article>
  <div class="random-toc-area">
  <button class="btn-hide-toc btn-hide-toc-show" style="display: none" onclick="TOCToggle()">显示目录</button>
  <button class="btn-hide-toc btn-hide-toc-hide" onclick="TOCToggle()">隐藏目录</button>
  <div class="random-toc">
    <h2>目录</h2>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#目标"><span class="toc-text">目标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#简易搭建方法"><span class="toc-text">简易搭建方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装前提"><span class="toc-text">安装前提</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装-hexo"><span class="toc-text">安装 hexo</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#建站"><span class="toc-text">建站</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#命令"><span class="toc-text">命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#new"><span class="toc-text">new</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#generate"><span class="toc-text">generate</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#clean"><span class="toc-text">clean</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#server"><span class="toc-text">server</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#deploy"><span class="toc-text">deploy</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#与-GitHub-进行关联"><span class="toc-text">与 GitHub 进行关联</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#建立-GitHub-repository"><span class="toc-text">建立 GitHub repository</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置与发布"><span class="toc-text">配置与发布</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#踩过的坑"><span class="toc-text">踩过的坑</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#页面引入-jQuery-的问题"><span class="toc-text">页面引入 jQuery 的问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-Material-主题时出现的问题"><span class="toc-text">使用 Material 主题时出现的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#hexo-g-报错问题"><span class="toc-text">hexo g 报错问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#本地搜索问题"><span class="toc-text">本地搜索问题</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文献"><span class="toc-text">参考文献</span></a></li></ol>
  </div>
</div>

  
<nav id="pagination">
  
    <a href="/2018/01/23/hello-world/" class="prev">&larr; 上一篇 Hello World</a>
  

  

  
</nav>

  <!-- JiaThis Button BEGIN -->

<!-- JiaThis Button END -->


      
      
    </div>
  </div>

  <div id="bottom-outer">
    <div id="bottom-inner">
      Site by 梦涵 using
      <a href="http://hexo.io">Hexo</a> & <a href="https://github.com/stiekel/hexo-theme-random">Random</a>
      <br>
      
    </div>
  </div>
</div>

</div>


<div id="user-card">
  <div class="center-field">
    <img class="avatar" src="/uploads/car_touxiang.jpg">
    <p id="description">自我管理，知识管理，时间管理，阅读，思维导图</p>
    <ul class="social-icon">
  
  
    <li>
      <a href="https://github.com/stiekel/hexo-theme-random">
        
          <i class="icon iconfont github">&#xe606;</i>
        
      </a>
    </li>
  
    <li>
      <a href="https://coding.net/">
        
          <i class="icon iconfont coding">&#xe607;</i>
        
      </a>
    </li>
  
    <li>
      <a href="https://twitter.com/">
        
          <i class="icon iconfont twitter">&#xe600;</i>
        
      </a>
    </li>
  
    <li>
      <a href="http://weibo.com/">
        
          <i class="icon iconfont weibo">&#xe602;</i>
        
      </a>
    </li>
  
    <li>
      <a href="http://www.douban.com/people/Stiekel/">
        
          <i class="icon iconfont douban">&#xe60f;</i>
        
      </a>
    </li>
  
</ul>
  </div>
</div>


<div id="btn-view">Hide</div>

<script>
// is trigger analytics / tongji script
var isIgnoreHost = false;

if(window && window.location && window.location.host) {
  isIgnoreHost = ["localhost","127.0.0.1"].some(function(address){
    return 0 === window.location.host.indexOf(address);
  });
}

var isTriggerAnalytics = !( true && isIgnoreHost );

</script>




  
  
    <script src="/js/jquery-2.2.3.min.js"></script>
  
    <script src="/js/vegas.min.js"></script>
  
    <script src="/js/random.js"></script>
  
    <script src="/js/highlight.pack.js"></script>
  
    <script src="/js/jquery.mousewheel.pack.js"></script>
  
    <script src="/js/jquery.fancybox.pack.js"></script>
  
    <script src="/js/jquery.fancybox-thumbs.js"></script>
  
    <script src="/js/plyr.js"></script>
  

<script>

  // fancybox
  var backgroundImages = [];
  
  $('#post').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox') || $(this).parent().hasClass('fancybox-thumb')) return;
      var alt = this.alt || this.title;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'post' + i);
    });
  });
  $(".fancybox").fancybox();

var vegasConfig = {"preload­Image":true,"transition":["slideLeft2","slideRight2","flash2"],"timer":true,"delay":5000,"shuffle":true,"count":28};
var unsplashConfig = {"gravity":"north"};
// is show background images
var turnoffBackgroundImage = false;



  turnoffBackgroundImage = true;


var backgroundColor = "34495E";

$(".fancybox-thumb").fancybox({
  prevEffect: 'none',
  nextEffect: 'none',
  helpers: {
    title: {
      type: 'outside'
    },
    thumbs: {
      width: 50,
      height: 50
    }
  }
});

// show video with plyr
$(".video-container iframe").each(function(i){
  var url = $(this).attr('src');
  var id = url.split('/').pop();
  var plyrContainer = document.createElement('div');
  plyrContainer.className = 'plyr';
  var plyrElement = document.createElement('div');
  plyrElement.dataset.videoId = id;
  switch(true) {
    case url.search('youtube.com') >= 0:
      plyrElement.dataset.type = 'youtube';
      break;
    case url.search('vimeo.com') >= 0:
      plyrElement.dataset.type = 'vimeo';
      break;
    default:
      return;
  };
  plyrContainer.appendChild(plyrElement);
  $(this).parent().html(plyrContainer);
});
plyr.setup('.plyr', {iconUrl: '/css/sprite.svg'});
</script>
</body>
</html>

